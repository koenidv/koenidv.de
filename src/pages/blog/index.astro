---
import BlogLayout from '../../layouts/BlogLayout.astro'
import { getCollection } from 'astro:content'
import { categoryColors } from './categoryColors'

export const prerender = true

const articles = (await getCollection('articles', ({ data }) =>
  data.draft !== true
)).sort((a, b) => 
  b.data.date.getTime() - a.data.date.getTime()
)
---

<BlogLayout
  title="Florian König's Technology Blog"
  description="Articles on tech and design by Florian König."
>
  <div class="max-w-7xl mx-auto md:py-8">
    <h1 class="text-3xl max-sm:text-center md:text-4xl font-black font-poppins tracking-wider mb-8">Articles</h1>
    
    <div class="grid gap-8 md:grid-cols-2">
      {articles.map((article) => (
        <div class="group flex w-full">
	<a class="elevated-card-hoverable hover:cursor-pointer w-full elevated"
    href={`/blog/${article.slug}`}>
		<div
			class="border-l-4 border-t-4 border-r-2 border-b-2 border-black min-h-[12rem] flex flex-col p-4 overflow-hidden">
          {article.data.image && (
            <div class="mb-4 overflow-hidden aspect-video">
              <img 
                src={article.data.image} 
                alt={article.data.title} 
                class="object-cover w-full h-full"
              />
            </div>
          )}
          
          <div class="flex items-center gap-2 mb-2">
            <span class={`text-xs font-normal px-2 py-1 rounded ${categoryColors[article.data.category]}`}>
              {article.data.category}
            </span>
            <time class="text-sm text-gray-600 font-normal">
              {article.data.date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long'
              })}
            </time>
          </div>
          
          <h2 class="text-2xl font-mono font-bold tracking-wide mb-2 group-hover:text-purple-600">
            {article.data.title}
          </h2>
          
          <p class="text-gray-600 font-medium text-sm line-clamp-3">
            {article.data.description}
          </p>
		</div>
	</a>
  </div>

      ))}
    </div>
    
    {articles.length === 0 && (
      <div class="text-center py-12">
        <p class="text-gray-500 font-mono">No articles published yet.</p>
      </div>
    )}
  </div>
</BlogLayout>
